 <!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Video statistics</title>

	<link rel="stylesheet" type="text/css" href="../js/third-party/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../js/third-party/bootstrap/css/bootstrap-theme.min.css">
	<link rel="stylesheet" type="text/css" href="encode.css">
	
	<script src="../js/third-party/jquery-1.8.1.js" type="text/javascript"></script>
	<script src="../js/third-party/base64.js" type="text/javascript"></script>
	<script src="../js/third-party/underscore-min.js" type="text/javascript"></script>
	<script src="../js/third-party/FileSaver.js" type="text/javascript"></script>
	<script src="../js/third-party/clusterfck.js" type="text/javascript"></script>
	<script src="../js/util.js" type="text/javascript"></script>
	<script src="../js/tileset.js" type="text/javascript"></script>
</head>

<body class="loading">
	<div class="loading-messsage">Loading...</div>
	
	<div>
		<table id="tile-count-table" class="table" style="max-width: 20em">
			<tr>
				<th>Tile</th><th>Count</th>
			</tr>
		</table>
	</div>

	<script>
		$(document).ready(function(){
			$.ajax('../data/unencoded-video-20x15-30fps.json').then(function(json){
				window.originalVideo = json;
				window.tileCounts = _.chain(originalVideo.frames).pluck('tiles').flatten().countBy().pairs().sortBy(1).reverse().value();
				
				var template = _.template(
					'<tr><th>Tile</th><th>Count</th></tr>' +
					'<% tileCounts.forEach(function(pair){ %>' +
					'<tr><td><%= pair[0] %></td><td class="text-right"><%= pair[1] %></td></tr>' + 
					'<% }); %>'
				);
				$('#tile-count-table').html(template({ tileCounts: tileCounts }));
				
				$('body').removeClass('loading');
			});
		})
	</script>
</body>

</html> 